# Мосты, туннели и VPN 

## Цель: научаться разбираться в терминологии различных технологий VPN и поднять свой собственный VPN сервер

## Задачи домашнего задания:
- между двумя виртуалками поднять vpn в режимах: tun, tap и прочувствовать разницу;
- поднять RAS на базе OpenVPN с клиентскими сертификатами, подключиться с локальной машины на виртуалку.

### Описание домашнего задания

#### I

1) для выполнения задания запускаем Vagrantfile из task_1;
2) затем заходим на server и запускаем тест пропускной способности ```iperf3 -s &```;
3) заходим на client и проверяем скорость через tun интерфейс ```iperf3 -c 10.10.10.1 -t 40 -i 5```;
4) затем заходим в "task_1/ansible/roles/client/vars/main.yml" а также "task_1/ansible/roles/server/vars/main.yml" и меняем значение переменной на "tap"
5) затем запускаем ansible ```vagrant provision client```;
6) снова заходим в client и проверяем скорость на интерфейсе tap ```iperf3 -c 10.10.10.1 -t 40 -i 5```;
7) исходя из тестов можем сделать вывод что tun выдает скорость передачи больше чем tap.

#### II

1) для выполнения задания запускаем Vagrantfile из task_2;
2) затем на хосте виртуалки выполняем следующие действия:
   - ```apt sudo update && sudo apt install openvpn -y``` # устанавливаем vpn, команды могут отличаться в зависти от ОС;
3) потом любым удобным способом передаем следующие сгенерированные на сервере сертификаты:
      - /etc/openvpn/pki/ca.crt
      - /etc/openvpn/pki/issued/client.crt
      - /etc/openvpn/pki/private/client.key
    
    в папку "/etc/openvpn/client/" на хостовую машину;
4) также скопируем файл настроек клиента из /task_2/ansible/roles/ovpn/templates/client.conf в директорию "/etc/openvpn/client/" на хостовую машину;
5) после этого на хостовой машине запускем vpn канал командой ```sudo systemctl start openvpn-client@client```;
6) остается только убедиться что канал работоспособен, для этого на хостовой машине попробуем пингануть сервер командой: ```ping -c 4 10.10.10.1```
